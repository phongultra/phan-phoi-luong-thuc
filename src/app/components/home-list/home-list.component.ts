import { ApiService } from './../../service/api.service';
import { Component, OnInit, NgZone, ViewChild } from '@angular/core';
import { MapInfoWindow, MapMarker, GoogleMap } from '@angular/google-maps'
import { FormGroup, FormBuilder, Validators } from "@angular/forms";

import { ChartDataSets, ChartOptions } from 'chart.js';
import { Color, Label } from 'ng2-charts';
import { DatePipe } from '@angular/common'



@Component({
  selector: 'app-home-list',
  templateUrl: './home-list.component.html',
  styleUrls: ['./home-list.component.scss']
})


export class HomeListComponent implements OnInit {
  selectedDistrict: any = "100";
  /*Chart */
  barChartData: ChartDataSets[] = [
    { data: [], label: 'Số người' },
  ];

  barChartLabels: Label[] = [];

  barChartOptions = {
    responsive: true,
    scales: {
      yAxes: [{ ticks: { min: 0, stepValue: 1 } }],
      xAxes: [{
        display: true,
        type: 'time',
        distribution: 'series',
        gridLines: {
          display: true
        },
        time: {
          tooltipFormat: 'DD/MM/YYYY',
          displayFormats: {
            'millisecond': 'DD/MM/YYYY',
            'second': 'DD/MM/YYYY',
            'minute': 'DD/MM/YYYY',
            'hour': 'DD/MM/YYYY',
            'day': 'DD/MM/YYYY',
            'week': 'DD/MM/YYYY',
            'month': 'DD/MM/YYYY',
            'quarter': 'DD/MM/YYYY',
            'year': 'DD/MM/YYYY',
            // millisecond: 'D MMM, h:mm a',
            // second: 'D MMM, h:mm a',
            // minute: 'D MMM, h:mm a',
            // hour: 'D MMM, h:mm a',
            // day: 'MM YYYY',
            // week: 'll',
            // month: 'll',
            // quarter: 'll',
            // year: 'll'
          },
        },
        ticks: {
          autoSkip: true,
          maxTicksLimit: 15
        }
      }]
    },
  };

  barChartColors: Color[] = [
    {
      borderColor: 'black',
      //backgroundColor: 'rgba(54, 162, 236, 0.85)',
      backgroundColor: '#cab481'
    },
  ];

  barChartLegend = true;
  barChartPlugins = [];
  barChartType = 'bar';
  /*Charrt - end */



  submitted = false;

  homeForm: FormGroup;
  districtForm: FormGroup;


  constructor(
    public fb: FormBuilder,
    private ngZone: NgZone,
    private apiService: ApiService,
    public datepipe: DatePipe
  ) {
    this.mainForm();
  }

  mainForm() {
    this.homeForm = this.fb.group({
      name: ['', [Validators.required]],
      address: ['', [Validators.required]],
      phoneNumber: ['', [Validators.required]],
      people: ['']
    })
    this.districtForm = this.fb.group({
      name: [''],
      districtId: [''],
      polygon: [''],
    })
  }

  get myForm() {
    return this.homeForm.controls;
  }

  @ViewChild(GoogleMap, { static: false }) map: GoogleMap
  @ViewChild(MapInfoWindow, { static: false }) info: MapInfoWindow

  showListByMap = true
  zoomBaseNum = 12
  center: google.maps.LatLngLiteral
  ggMapMarkers = []
  homeInfo = {
    name: "",
    phoneNumber: "",
    address: "",
    address_location: {},
    people: "",
    modified_date: null
  }
  homeHistory = []
  currentHomeId = ""
  paths = [];
  rowSelection = 'single';

  districtPolygon = {
    1: [{ lng: 106.681407399999998, lat: 10.7655393 }, { lng: 106.681612700000002, lat: 10.7654858 }, { lng: 106.6820697, lat: 10.764324 }, { lng: 106.683246499999996, lat: 10.761349600000001 }, { lng: 106.683984699999996, lat: 10.759483100000001 }, { lng: 106.685148799999993, lat: 10.756552599999999 }, { lng: 106.685228800000004, lat: 10.7564432 }, { lng: 106.685496400000005, lat: 10.7558466 }, { lng: 106.685669399999995, lat: 10.7555701 }, { lng: 106.685762199999999, lat: 10.755496600000001 }, { lng: 106.686153700000006, lat: 10.755006099999999 }, { lng: 106.686284599999993, lat: 10.754823 }, { lng: 106.686381600000004, lat: 10.754682600000001 }, { lng: 106.686486400000007, lat: 10.7545082 }, { lng: 106.686553099999998, lat: 10.7543875 }, { lng: 106.686622400000005, lat: 10.754253 }, { lng: 106.686688399999994, lat: 10.7541102 }, { lng: 106.686750200000006, lat: 10.753966399999999 }, { lng: 106.686802, lat: 10.753833699999999 }, { lng: 106.686847499999999, lat: 10.753711900000001 }, { lng: 106.686996699999995, lat: 10.753246799999999 }, { lng: 106.687873999999994, lat: 10.7541309 }, { lng: 106.689091300000001, lat: 10.755357500000001 }, { lng: 106.690446800000004, lat: 10.7565556 }, { lng: 106.691313500000007, lat: 10.7573215 }, { lng: 106.691854800000002, lat: 10.757728800000001 }, { lng: 106.692289799999998, lat: 10.7580156 }, { lng: 106.692663199999998, lat: 10.7582833 }, { lng: 106.694317100000006, lat: 10.759241400000001 }, { lng: 106.694707800000003, lat: 10.759464599999999 }, { lng: 106.695286100000004, lat: 10.759794899999999 }, { lng: 106.695946800000002, lat: 10.7603402 }, { lng: 106.696387700000002, lat: 10.7608836 }, { lng: 106.696909899999994, lat: 10.7615754 }, { lng: 106.697070499999995, lat: 10.7617884 }, { lng: 106.697224300000002, lat: 10.762003399999999 }, { lng: 106.697973099999999, lat: 10.7630508 }, { lng: 106.697995899999995, lat: 10.763082799999999 }, { lng: 106.698513599999998, lat: 10.763598699999999 }, { lng: 106.699181999999993, lat: 10.7640546 }, { lng: 106.699832599999993, lat: 10.7643924 }, { lng: 106.700013200000001, lat: 10.7644863 }, { lng: 106.700341899999998, lat: 10.7646921 }, { lng: 106.700930900000003, lat: 10.7650611 }, { lng: 106.701307799999995, lat: 10.7653316 }, { lng: 106.701442, lat: 10.7654864 }, { lng: 106.701469399999993, lat: 10.765518 }, { lng: 106.702021200000004, lat: 10.766401500000001 }, { lng: 106.702473699999999, lat: 10.7670405 }, { lng: 106.702854000000002, lat: 10.767480000000001 }, { lng: 106.703240500000007, lat: 10.767757 }, { lng: 106.703540599999997, lat: 10.767942700000001 }, { lng: 106.703917200000006, lat: 10.768133000000001 }, { lng: 106.704378399999996, lat: 10.7683295 }, { lng: 106.705174, lat: 10.768746399999999 }, { lng: 106.706439500000002, lat: 10.769084599999999 }, { lng: 106.708332600000006, lat: 10.769417300000001 }, { lng: 106.708026799999999, lat: 10.7701548 }, { lng: 106.707806099999999, lat: 10.7706009 }, { lng: 106.707890599999999, lat: 10.7729406 }, { lng: 106.708168400000005, lat: 10.775467300000001 }, { lng: 106.708756100000002, lat: 10.778187300000001 }, { lng: 106.710124899999997, lat: 10.781049400000001 }, { lng: 106.710990699999996, lat: 10.7824209 }, { lng: 106.712958099999994, lat: 10.7842144 }, { lng: 106.714963600000004, lat: 10.785626199999999 }, { lng: 106.713514599999996, lat: 10.7871179 }, { lng: 106.712946700000003, lat: 10.787497800000001 }, { lng: 106.712376199999994, lat: 10.787622499999999 }, { lng: 106.7116039, lat: 10.787785899999999 }, { lng: 106.711164100000005, lat: 10.7876768 }, { lng: 106.710452399999994, lat: 10.7876207 }, { lng: 106.709927800000003, lat: 10.7875026 }, { lng: 106.709387300000003, lat: 10.787500700000001 }, { lng: 106.708633599999999, lat: 10.7879039 }, { lng: 106.708192800000006, lat: 10.788326400000001 }, { lng: 106.707867399999998, lat: 10.788728799999999 }, { lng: 106.707524699999993, lat: 10.7892194 }, { lng: 106.707286999999994, lat: 10.7900121 }, { lng: 106.706883399999995, lat: 10.791169099999999 }, { lng: 106.706748599999997, lat: 10.7916825 }, { lng: 106.706540000000004, lat: 10.791909199999999 }, { lng: 106.706061500000004, lat: 10.792275500000001 }, { lng: 106.704915799999995, lat: 10.792593999999999 }, { lng: 106.703269399999996, lat: 10.793017600000001 }, { lng: 106.7015636, lat: 10.793419200000001 }, { lng: 106.700883500000003, lat: 10.7936318 }, { lng: 106.700572800000003, lat: 10.793590399999999 }, { lng: 106.699579299999996, lat: 10.7937893 }, { lng: 106.697676799999996, lat: 10.7939401 }, { lng: 106.697565499999996, lat: 10.793888600000001 }, { lng: 106.697039099999998, lat: 10.7938796 }, { lng: 106.696891899999997, lat: 10.7938771 }, { lng: 106.696340899999996, lat: 10.793811399999999 }, { lng: 106.695961600000004, lat: 10.7937786 }, { lng: 106.695531399999993, lat: 10.793677199999999 }, { lng: 106.695210200000005, lat: 10.793647099999999 }, { lng: 106.694939599999998, lat: 10.793760600000001 }, { lng: 106.694637900000004, lat: 10.7941293 }, { lng: 106.694794700000003, lat: 10.794849299999999 }, { lng: 106.694659200000004, lat: 10.7951117 }, { lng: 106.694465500000007, lat: 10.7952034 }, { lng: 106.694094800000002, lat: 10.7952187 }, { lng: 106.693654199999997, lat: 10.795154399999999 }, { lng: 106.693105000000003, lat: 10.795070300000001 }, { lng: 106.692542200000005, lat: 10.7951338 }, { lng: 106.691951500000002, lat: 10.7956383 }, { lng: 106.691633199999998, lat: 10.7957277 }, { lng: 106.691045900000006, lat: 10.795962599999999 }, { lng: 106.690722300000004, lat: 10.7960031 }, { lng: 106.690521399999994, lat: 10.795973999999999 }, { lng: 106.690139099999996, lat: 10.795926400000001 }, { lng: 106.689276199999995, lat: 10.795798 }, { lng: 106.689028500000006, lat: 10.7957611 }, { lng: 106.688774100000003, lat: 10.7956632 }, { lng: 106.687856400000001, lat: 10.795170499999999 }, { lng: 106.687478299999995, lat: 10.795017100000001 }, { lng: 106.687248199999999, lat: 10.795083099999999 }, { lng: 106.687088500000002, lat: 10.795237699999999 }, { lng: 106.686977499999998, lat: 10.7954186 }, { lng: 106.686425400000005, lat: 10.7965863 }, { lng: 106.686170599999997, lat: 10.796962199999999 }, { lng: 106.685936499999997, lat: 10.7970702 }, { lng: 106.685709900000006, lat: 10.797128000000001 }, { lng: 106.685290199999997, lat: 10.7970969 }, { lng: 106.684959399999997, lat: 10.796890100000001 }, { lng: 106.684670600000004, lat: 10.7964751 }, { lng: 106.684634200000005, lat: 10.796170399999999 }, { lng: 106.684871799999996, lat: 10.7944885 }, { lng: 106.685013900000001, lat: 10.794185499999999 }, { lng: 106.685834099999994, lat: 10.7934395 }, { lng: 106.686115099999995, lat: 10.7931423 }, { lng: 106.6861131, lat: 10.7928028 }, { lng: 106.685996399999993, lat: 10.792614199999999 }, { lng: 106.688343000000003, lat: 10.7907571 }, { lng: 106.688713899999996, lat: 10.7904614 }, { lng: 106.691981299999995, lat: 10.787890300000001 }, { lng: 106.698068899999996, lat: 10.7828692 }, { lng: 106.6949544, lat: 10.7795562 }, { lng: 106.693005600000006, lat: 10.777417099999999 }, { lng: 106.691715599999995, lat: 10.7760091 }, { lng: 106.691648900000004, lat: 10.775968000000001 }, { lng: 106.689425299999996, lat: 10.773612099999999 }, { lng: 106.6872118, lat: 10.771251299999999 }, { lng: 106.685095399999994, lat: 10.768834500000001 }, { lng: 106.684401500000007, lat: 10.768277100000001 }, { lng: 106.684315299999994, lat: 10.7682012 }, { lng: 106.681814299999999, lat: 10.765800199999999 }, { lng: 106.681546699999998, lat: 10.765666 }, { lng: 106.681483099999994, lat: 10.7656303 }, { lng: 106.681407399999998, lat: 10.7655393 }],
    2: [{ lng: 106.707806099999999, lat: 10.7706009 }, { lng: 106.707890599999999, lat: 10.7729406 }, { lng: 106.708168400000005, lat: 10.775467300000001 }, { lng: 106.708756100000002, lat: 10.778187300000001 }, { lng: 106.710124899999997, lat: 10.781049400000001 }, { lng: 106.710990699999996, lat: 10.7824209 }, { lng: 106.712958099999994, lat: 10.7842144 }, { lng: 106.714963600000004, lat: 10.785626199999999 }, { lng: 106.7161993, lat: 10.7857953 }, { lng: 106.717489799999996, lat: 10.7860605 }, { lng: 106.720116099999998, lat: 10.786648400000001 }, { lng: 106.721815000000007, lat: 10.7875564 }, { lng: 106.722122100000007, lat: 10.787720500000001 }, { lng: 106.723568599999993, lat: 10.788851599999999 }, { lng: 106.724962099999999, lat: 10.790583099999999 }, { lng: 106.726165300000005, lat: 10.7927836 }, { lng: 106.726704299999994, lat: 10.7943064 }, { lng: 106.726942699999995, lat: 10.796713799999999 }, { lng: 106.727100100000001, lat: 10.7981125 }, { lng: 106.726958100000004, lat: 10.798772700000001 }, { lng: 106.726707599999997, lat: 10.7999923 }, { lng: 106.726008199999995, lat: 10.801372499999999 }, { lng: 106.724801799999995, lat: 10.8032909 }, { lng: 106.7233248, lat: 10.805468400000001 }, { lng: 106.722555799999995, lat: 10.8076066 }, { lng: 106.721885599999993, lat: 10.809837999999999 }, { lng: 106.722938900000003, lat: 10.8126909 }, { lng: 106.723876599999997, lat: 10.8148664 }, { lng: 106.724959699999999, lat: 10.816379400000001 }, { lng: 106.725156400000003, lat: 10.8167215 }, { lng: 106.726745399999999, lat: 10.8179506 }, { lng: 106.727615499999999, lat: 10.8185188 }, { lng: 106.728826400000003, lat: 10.819171000000001 }, { lng: 106.730307999999994, lat: 10.819867 }, { lng: 106.731818799999999, lat: 10.820109199999999 }, { lng: 106.732623899999993, lat: 10.819780700000001 }, { lng: 106.734241800000007, lat: 10.8188108 }, { lng: 106.735749499999997, lat: 10.8154187 }, { lng: 106.736748000000006, lat: 10.8125055 }, { lng: 106.737163600000002, lat: 10.8114457 }, { lng: 106.7377307, lat: 10.810659599999999 }, { lng: 106.737816600000002, lat: 10.8106174 }, { lng: 106.741056700000001, lat: 10.808931299999999 }, { lng: 106.743846199999993, lat: 10.808362199999999 }, { lng: 106.7462065, lat: 10.808783699999999 }, { lng: 106.747891800000005, lat: 10.809465299999999 }, { lng: 106.748395200000004, lat: 10.809669 }, { lng: 106.750111799999999, lat: 10.811818799999999 }, { lng: 106.750646700000004, lat: 10.813059000000001 }, { lng: 106.753090700000001, lat: 10.8131149 }, { lng: 106.755214100000003, lat: 10.813191399999999 }, { lng: 106.756268800000001, lat: 10.8132679 }, { lng: 106.756950099999997, lat: 10.8132565 }, { lng: 106.757415600000002, lat: 10.813247 }, { lng: 106.758123400000002, lat: 10.813420799999999 }, { lng: 106.759057799999994, lat: 10.8136224 }, { lng: 106.759970899999999, lat: 10.8140883 }, { lng: 106.760629199999997, lat: 10.814422 }, { lng: 106.761018500000006, lat: 10.8145472 }, { lng: 106.761938700000002, lat: 10.814561100000001 }, { lng: 106.762462400000004, lat: 10.8144011 }, { lng: 106.762752599999999, lat: 10.814276 }, { lng: 106.763290699999999, lat: 10.813977 }, { lng: 106.763722299999998, lat: 10.813476400000001 }, { lng: 106.764142699999994, lat: 10.812547199999999 }, { lng: 106.764260800000002, lat: 10.8112721 }, { lng: 106.764378800000003, lat: 10.8105344 }, { lng: 106.764571900000007, lat: 10.810049599999999 }, { lng: 106.764882999999998, lat: 10.809628099999999 }, { lng: 106.765483799999998, lat: 10.8091644 }, { lng: 106.765968700000002, lat: 10.8087444 }, { lng: 106.766324499999996, lat: 10.8085234 }, { lng: 106.766837699999996, lat: 10.8082913 }, { lng: 106.767243399999998, lat: 10.808184300000001 }, { lng: 106.767405800000006, lat: 10.808180699999999 }, { lng: 106.7676424, lat: 10.8081754 }, { lng: 106.768221699999998, lat: 10.808270200000001 }, { lng: 106.769058599999994, lat: 10.808396699999999 }, { lng: 106.769979199999995, lat: 10.8083951 }, { lng: 106.770934100000005, lat: 10.8082475 }, { lng: 106.771577800000003, lat: 10.8080684 }, { lng: 106.772114299999998, lat: 10.807815400000001 }, { lng: 106.772790200000003, lat: 10.807594099999999 }, { lng: 106.773551900000001, lat: 10.807615200000001 }, { lng: 106.774357699999996, lat: 10.8077661 }, { lng: 106.775129300000003, lat: 10.8079816 }, { lng: 106.775723900000003, lat: 10.8082388 }, { lng: 106.776544900000005, lat: 10.808927199999999 }, { lng: 106.776771699999998, lat: 10.8090625 }, { lng: 106.776958199999996, lat: 10.8087336 }, { lng: 106.777017299999997, lat: 10.808523299999999 }, { lng: 106.777064300000006, lat: 10.808303199999999 }, { lng: 106.777111300000001, lat: 10.808083 }, { lng: 106.777781099999999, lat: 10.8057558 }, { lng: 106.778393699999995, lat: 10.8037682 }, { lng: 106.779126099999999, lat: 10.8012576 }, { lng: 106.779432299999996, lat: 10.800208100000001 }, { lng: 106.779590600000006, lat: 10.799665600000001 }, { lng: 106.7799713, lat: 10.7983604 }, { lng: 106.780439700000002, lat: 10.7967409 }, { lng: 106.780444599999996, lat: 10.7967242 }, { lng: 106.781062500000004, lat: 10.7946147 }, { lng: 106.781092400000006, lat: 10.7944782 }, { lng: 106.781117699999996, lat: 10.7943619 }, { lng: 106.781422599999999, lat: 10.793456300000001 }, { lng: 106.781533600000003, lat: 10.792973099999999 }, { lng: 106.781607399999999, lat: 10.792652199999999 }, { lng: 106.781631300000001, lat: 10.7923416 }, { lng: 106.781600699999998, lat: 10.7909968 }, { lng: 106.781626500000002, lat: 10.790415299999999 }, { lng: 106.785567200000003, lat: 10.790647699999999 }, { lng: 106.786834999999996, lat: 10.790671100000001 }, { lng: 106.786837399999996, lat: 10.790148 }, { lng: 106.786880400000001, lat: 10.7894313 }, { lng: 106.786923299999998, lat: 10.788619799999999 }, { lng: 106.786998400000002, lat: 10.7876291 }, { lng: 106.787127100000006, lat: 10.786580499999999 }, { lng: 106.787261200000003, lat: 10.785531799999999 }, { lng: 106.787223699999998, lat: 10.785031200000001 }, { lng: 106.786992999999995, lat: 10.7846992 }, { lng: 106.786692700000003, lat: 10.784456799999999 }, { lng: 106.786193699999998, lat: 10.7842091 }, { lng: 106.785560700000005, lat: 10.783924499999999 }, { lng: 106.785094000000001, lat: 10.783603100000001 }, { lng: 106.784729200000001, lat: 10.7832711 }, { lng: 106.784262499999997, lat: 10.782881100000001 }, { lng: 106.7840372, lat: 10.782659799999999 }, { lng: 106.783876300000003, lat: 10.782427999999999 }, { lng: 106.7838548, lat: 10.7821961 }, { lng: 106.783892399999999, lat: 10.781937900000001 }, { lng: 106.784042600000006, lat: 10.7817323 }, { lng: 106.784321500000004, lat: 10.7814847 }, { lng: 106.784900899999997, lat: 10.7811053 }, { lng: 106.785442700000004, lat: 10.780852299999999 }, { lng: 106.786515600000001, lat: 10.780330599999999 }, { lng: 106.788130300000006, lat: 10.7794664 }, { lng: 106.789911399999994, lat: 10.778544200000001 }, { lng: 106.790662299999994, lat: 10.778407100000001 }, { lng: 106.793017199999994, lat: 10.7784388 }, { lng: 106.794057899999999, lat: 10.7785125 }, { lng: 106.795619000000002, lat: 10.7787918 }, { lng: 106.796412900000007, lat: 10.7788445 }, { lng: 106.796965499999999, lat: 10.7788024 }, { lng: 106.797491199999996, lat: 10.7786179 }, { lng: 106.797963199999998, lat: 10.778206900000001 }, { lng: 106.798145599999998, lat: 10.777811700000001 }, { lng: 106.798381699999993, lat: 10.776647000000001 }, { lng: 106.798574799999997, lat: 10.7762992 }, { lng: 106.7987143, lat: 10.7761464 }, { lng: 106.799229199999999, lat: 10.7759672 }, { lng: 106.799948099999995, lat: 10.7759619 }, { lng: 106.800693699999997, lat: 10.7759251 }, { lng: 106.801021000000006, lat: 10.775898700000001 }, { lng: 106.801519799999994, lat: 10.7756721 }, { lng: 106.802181599999997, lat: 10.775325499999999 }, { lng: 106.803146100000006, lat: 10.774310099999999 }, { lng: 106.804288700000001, lat: 10.773940700000001 }, { lng: 106.805175000000006, lat: 10.7736532 }, { lng: 106.807321999999999, lat: 10.771955200000001 }, { lng: 106.806684899999993, lat: 10.7712238 }, { lng: 106.806064800000001, lat: 10.7703311 }, { lng: 106.8056713, lat: 10.7695715 }, { lng: 106.805214199999995, lat: 10.7686419 }, { lng: 106.804662100000002, lat: 10.7670314 }, { lng: 106.803850800000006, lat: 10.764364799999999 }, { lng: 106.803400999999994, lat: 10.763192999999999 }, { lng: 106.803218200000003, lat: 10.762853399999999 }, { lng: 106.802707699999999, lat: 10.762139299999999 }, { lng: 106.801869100000005, lat: 10.7609429 }, { lng: 106.801377700000003, lat: 10.760408 }, { lng: 106.8003973, lat: 10.7596965 }, { lng: 106.799783500000004, lat: 10.759297399999999 }, { lng: 106.799317700000003, lat: 10.7589945 }, { lng: 106.796887999999996, lat: 10.7577715 }, { lng: 106.792865000000006, lat: 10.7561097 }, { lng: 106.790431999999996, lat: 10.7550895 }, { lng: 106.788687899999999, lat: 10.7543858 }, { lng: 106.785335799999999, lat: 10.7530424 }, { lng: 106.783478200000005, lat: 10.7522194 }, { lng: 106.783429299999995, lat: 10.7521969 }, { lng: 106.777315099999996, lat: 10.749368199999999 }, { lng: 106.774150899999995, lat: 10.7476921 }, { lng: 106.7726629, lat: 10.746696699999999 }, { lng: 106.770846899999995, lat: 10.7452907 }, { lng: 106.769701699999999, lat: 10.7442034 }, { lng: 106.768655999999993, lat: 10.7431427 }, { lng: 106.767928299999994, lat: 10.7423222 }, { lng: 106.767381400000005, lat: 10.741536399999999 }, { lng: 106.7667857, lat: 10.740345599999999 }, { lng: 106.763648900000007, lat: 10.742013 }, { lng: 106.762351899999999, lat: 10.7426662 }, { lng: 106.761413500000003, lat: 10.743154499999999 }, { lng: 106.760765000000006, lat: 10.743392 }, { lng: 106.759696899999994, lat: 10.743648500000001 }, { lng: 106.758537200000006, lat: 10.7438173 }, { lng: 106.757423299999999, lat: 10.7438593 }, { lng: 106.756355200000002, lat: 10.7437925 }, { lng: 106.755500699999999, lat: 10.743619000000001 }, { lng: 106.754531799999995, lat: 10.743313799999999 }, { lng: 106.752250599999996, lat: 10.742429700000001 }, { lng: 106.750129599999994, lat: 10.7415524 }, { lng: 106.748947000000001, lat: 10.7414761 }, { lng: 106.747855999999999, lat: 10.741440799999999 }, { lng: 106.747024400000001, lat: 10.741694499999999 }, { lng: 106.745941099999996, lat: 10.742362 }, { lng: 106.745200999999994, lat: 10.7431936 }, { lng: 106.744369399999997, lat: 10.744192099999999 }, { lng: 106.744148199999998, lat: 10.744900700000001 }, { lng: 106.744041300000006, lat: 10.7452278 }, { lng: 106.743682800000002, lat: 10.748499900000001 }, { lng: 106.743858200000005, lat: 10.7497816 }, { lng: 106.744262599999999, lat: 10.7511206 }, { lng: 106.745529099999999, lat: 10.753121399999999 }, { lng: 106.746764999999996, lat: 10.7548923 }, { lng: 106.748405399999996, lat: 10.7565174 }, { lng: 106.750129599999994, lat: 10.7578716 }, { lng: 106.750678899999997, lat: 10.7584476 }, { lng: 106.751121400000002, lat: 10.7591763 }, { lng: 106.751556300000004, lat: 10.7600889 }, { lng: 106.752166599999995, lat: 10.761775999999999 }, { lng: 106.752372600000001, lat: 10.7627354 }, { lng: 106.752517600000004, lat: 10.763550800000001 }, { lng: 106.752555700000002, lat: 10.7640438 }, { lng: 106.752540499999995, lat: 10.764488200000001 }, { lng: 106.752464200000006, lat: 10.7652693 }, { lng: 106.752273500000001, lat: 10.766221 }, { lng: 106.751991200000006, lat: 10.767266299999999 }, { lng: 106.751800399999993, lat: 10.767948199999999 }, { lng: 106.751403699999997, lat: 10.769035300000001 }, { lng: 106.751045099999999, lat: 10.7697716 }, { lng: 106.750579700000003, lat: 10.770483 }, { lng: 106.750129599999994, lat: 10.770956999999999 }, { lng: 106.749130100000002, lat: 10.7717934 }, { lng: 106.748237500000002, lat: 10.7725677 }, { lng: 106.747512700000001, lat: 10.773195299999999 }, { lng: 106.747180099999994, lat: 10.773567699999999 }, { lng: 106.746658199999999, lat: 10.7741518 }, { lng: 106.7452392, lat: 10.775391600000001 }, { lng: 106.744216800000004, lat: 10.776083 }, { lng: 106.743675100000004, lat: 10.776350000000001 }, { lng: 106.7430114, lat: 10.776676200000001 }, { lng: 106.741638100000003, lat: 10.7771721 }, { lng: 106.740409799999995, lat: 10.7773991 }, { lng: 106.739349300000001, lat: 10.777404799999999 }, { lng: 106.737922600000005, lat: 10.7772913 }, { lng: 106.737083299999995, lat: 10.777051 }, { lng: 106.736366200000006, lat: 10.776567500000001 }, { lng: 106.735450599999993, lat: 10.7753754 }, { lng: 106.734977599999993, lat: 10.774400699999999 }, { lng: 106.734695299999998, lat: 10.7734747 }, { lng: 106.734451199999995, lat: 10.771876300000001 }, { lng: 106.734298600000002, lat: 10.7706556 }, { lng: 106.734313900000004, lat: 10.768845600000001 }, { lng: 106.734008700000004, lat: 10.7656603 }, { lng: 106.733543299999994, lat: 10.763588 }, { lng: 106.732917700000002, lat: 10.7620916 }, { lng: 106.732215800000006, lat: 10.760978700000001 }, { lng: 106.731132400000007, lat: 10.760059399999999 }, { lng: 106.729804900000005, lat: 10.7595987 }, { lng: 106.727706800000007, lat: 10.7592564 }, { lng: 106.724090500000003, lat: 10.758934999999999 }, { lng: 106.721997599999995, lat: 10.759335800000001 }, { lng: 106.7200658, lat: 10.7599778 }, { lng: 106.717460599999995, lat: 10.7606395 }, { lng: 106.714442300000002, lat: 10.7626454 }, { lng: 106.712665799999996, lat: 10.763598 }, { lng: 106.710987200000005, lat: 10.7647037 }, { lng: 106.709628499999994, lat: 10.7664408 }, { lng: 106.708332600000006, lat: 10.769417300000001 }, { lng: 106.708026799999999, lat: 10.7701548 }, { lng: 106.707806099999999, lat: 10.7706009 }]
    , 3: [{ lng: 106.664229300000002, lat: 10.7871091 }, { lng: 106.6642662, lat: 10.7871541 }, { lng: 106.664586600000007, lat: 10.7876218 }, { lng: 106.665284700000001, lat: 10.788576300000001 }, { lng: 106.665212299999993, lat: 10.7887238 }, { lng: 106.665134699999996, lat: 10.789037199999999 }, { lng: 106.665100800000005, lat: 10.7891739 }, { lng: 106.664795699999999, lat: 10.790115399999999 }, { lng: 106.665050300000004, lat: 10.790155199999999 }, { lng: 106.665726300000003, lat: 10.7897021 }, { lng: 106.666137300000003, lat: 10.7893609 }, { lng: 106.666233899999995, lat: 10.7893372 }, { lng: 106.666274200000004, lat: 10.789464499999999 }, { lng: 106.666691400000005, lat: 10.7895466 }, { lng: 106.666694199999995, lat: 10.789821 }, { lng: 106.666791099999998, lat: 10.790073700000001 }, { lng: 106.666712099999998, lat: 10.7897401 }, { lng: 106.666746799999999, lat: 10.7895977 }, { lng: 106.666958899999997, lat: 10.7893876 }, { lng: 106.6680286, lat: 10.7888821 }, { lng: 106.670722699999999, lat: 10.787937400000001 }, { lng: 106.6708699, lat: 10.7885755 }, { lng: 106.670995099999999, lat: 10.7891902 }, { lng: 106.671027699999996, lat: 10.789383000000001 }, { lng: 106.671331300000006, lat: 10.789338300000001 }, { lng: 106.671439899999996, lat: 10.789343499999999 }, { lng: 106.671532400000004, lat: 10.789340899999999 }, { lng: 106.671674600000003, lat: 10.789351399999999 }, { lng: 106.671873099999999, lat: 10.789356700000001 }, { lng: 106.671873099999999, lat: 10.789400199999999 }, { lng: 106.671984399999999, lat: 10.789439700000001 }, { lng: 106.6719911, lat: 10.7894779 }, { lng: 106.672068899999999, lat: 10.7894858 }, { lng: 106.672074199999997, lat: 10.789522699999999 }, { lng: 106.672156000000001, lat: 10.789538500000001 }, { lng: 106.672158699999997, lat: 10.7896479 }, { lng: 106.672126500000005, lat: 10.789779599999999 }, { lng: 106.672161399999993, lat: 10.7897789 }, { lng: 106.672241900000003, lat: 10.789793400000001 }, { lng: 106.672294199999996, lat: 10.789771 }, { lng: 106.672494, lat: 10.789775000000001 }, { lng: 106.672677699999994, lat: 10.789813199999999 }, { lng: 106.672704600000003, lat: 10.789836899999999 }, { lng: 106.672750199999996, lat: 10.7898593 }, { lng: 106.672814500000001, lat: 10.789873800000001 }, { lng: 106.672911099999993, lat: 10.789892200000001 }, { lng: 106.672978099999995, lat: 10.7898935 }, { lng: 106.673066700000007, lat: 10.7898791 }, { lng: 106.6731391, lat: 10.7898896 }, { lng: 106.673218199999994, lat: 10.789909400000001 }, { lng: 106.673261100000005, lat: 10.789935699999999 }, { lng: 106.673304000000002, lat: 10.7899133 }, { lng: 106.673326799999998, lat: 10.789964700000001 }, { lng: 106.673373799999993, lat: 10.7900042 }, { lng: 106.673423400000004, lat: 10.790010799999999 }, { lng: 106.673456900000005, lat: 10.789994999999999 }, { lng: 106.6735173, lat: 10.7900174 }, { lng: 106.673564200000001, lat: 10.7900279 }, { lng: 106.673633899999999, lat: 10.7899963 }, { lng: 106.673694299999994, lat: 10.789979199999999 }, { lng: 106.673743900000005, lat: 10.7899449 }, { lng: 106.673869699999997, lat: 10.7900179 }, { lng: 106.673928500000002, lat: 10.790099700000001 }, { lng: 106.673914199999999, lat: 10.7902629 }, { lng: 106.673963099999995, lat: 10.7903144 }, { lng: 106.674260000000004, lat: 10.7901662 }, { lng: 106.6742895, lat: 10.790207300000001 }, { lng: 106.674666900000005, lat: 10.7900049 }, { lng: 106.674684900000003, lat: 10.790165399999999 }, { lng: 106.674883600000001, lat: 10.790156400000001 }, { lng: 106.674881200000002, lat: 10.7902185 }, { lng: 106.675165899999996, lat: 10.790252600000001 }, { lng: 106.675155599999997, lat: 10.7903129 }, { lng: 106.675226600000002, lat: 10.790320100000001 }, { lng: 106.675334599999999, lat: 10.790322 }, { lng: 106.675355300000007, lat: 10.790246099999999 }, { lng: 106.675835300000003, lat: 10.790370100000001 }, { lng: 106.675878900000001, lat: 10.790355699999999 }, { lng: 106.676274100000001, lat: 10.790499499999999 }, { lng: 106.6763701, lat: 10.7905075 }, { lng: 106.676371799999998, lat: 10.790569400000001 }, { lng: 106.676556899999994, lat: 10.790590399999999 }, { lng: 106.676556899999994, lat: 10.790553600000001 }, { lng: 106.676615900000002, lat: 10.790553600000001 }, { lng: 106.676621299999994, lat: 10.790437600000001 }, { lng: 106.676709799999998, lat: 10.790453400000001 }, { lng: 106.676739299999994, lat: 10.7904745 }, { lng: 106.676782200000005, lat: 10.7904824 }, { lng: 106.676830499999994, lat: 10.7904956 }, { lng: 106.676819699999996, lat: 10.790587800000001 }, { lng: 106.676817099999994, lat: 10.790635200000001 }, { lng: 106.676862700000001, lat: 10.790635200000001 }, { lng: 106.676897499999995, lat: 10.7906669 }, { lng: 106.676956500000003, lat: 10.7906932 }, { lng: 106.676959199999999, lat: 10.790756399999999 }, { lng: 106.6769994, lat: 10.790769600000001 }, { lng: 106.676996799999998, lat: 10.7908328 }, { lng: 106.677104099999994, lat: 10.7908513 }, { lng: 106.677275699999996, lat: 10.7908724 }, { lng: 106.677417899999995, lat: 10.790917200000001 }, { lng: 106.677570799999998, lat: 10.7909699 }, { lng: 106.677616400000005, lat: 10.790922399999999 }, { lng: 106.677688799999999, lat: 10.7909013 }, { lng: 106.677739700000004, lat: 10.790911899999999 }, { lng: 106.677825600000006, lat: 10.7909066 }, { lng: 106.677817500000003, lat: 10.7908697 }, { lng: 106.677812200000005, lat: 10.790759100000001 }, { lng: 106.678079800000006, lat: 10.7907651 }, { lng: 106.678399600000006, lat: 10.7907881 }, { lng: 106.6783942, lat: 10.7908618 }, { lng: 106.678547100000003, lat: 10.7909013 }, { lng: 106.678627500000005, lat: 10.7908776 }, { lng: 106.678673099999997, lat: 10.7908566 }, { lng: 106.678764299999997, lat: 10.7908724 }, { lng: 106.678764299999997, lat: 10.7908355 }, { lng: 106.678850199999999, lat: 10.7908197 }, { lng: 106.678984299999996, lat: 10.7908566 }, { lng: 106.679101500000002, lat: 10.790921300000001 }, { lng: 106.679260600000006, lat: 10.7910278 }, { lng: 106.679319599999999, lat: 10.7910357 }, { lng: 106.679340999999994, lat: 10.790961899999999 }, { lng: 106.679453699999996, lat: 10.7910041 }, { lng: 106.679453699999996, lat: 10.7910357 }, { lng: 106.679587799999993, lat: 10.7910568 }, { lng: 106.6796334, lat: 10.790975100000001 }, { lng: 106.679716499999998, lat: 10.7909883 }, { lng: 106.679740699999996, lat: 10.7910357 }, { lng: 106.679767499999997, lat: 10.791114800000001 }, { lng: 106.679805000000002, lat: 10.791130600000001 }, { lng: 106.679874799999993, lat: 10.791180600000001 }, { lng: 106.680101100000002, lat: 10.791277600000001 }, { lng: 106.680236899999997, lat: 10.7912518 }, { lng: 106.680312000000001, lat: 10.7912518 }, { lng: 106.680387100000004, lat: 10.791296600000001 }, { lng: 106.680451500000004, lat: 10.791344 }, { lng: 106.680518500000005, lat: 10.791354500000001 }, { lng: 106.680599000000001, lat: 10.791283399999999 }, { lng: 106.680805500000005, lat: 10.7913598 }, { lng: 106.680877899999999, lat: 10.7912307 }, { lng: 106.681140799999994, lat: 10.791285999999999 }, { lng: 106.681382499999998, lat: 10.791147 }, { lng: 106.681489299999996, lat: 10.7913295 }, { lng: 106.681697, lat: 10.791587399999999 }, { lng: 106.681855299999995, lat: 10.7917463 }, { lng: 106.682125200000002, lat: 10.791964399999999 }, { lng: 106.682567800000001, lat: 10.7922411 }, { lng: 106.683010300000007, lat: 10.792444 }, { lng: 106.683544400000002, lat: 10.792589100000001 }, { lng: 106.684056999999996, lat: 10.792639100000001 }, { lng: 106.684705199999996, lat: 10.7925535 }, { lng: 106.685234399999999, lat: 10.792449299999999 }, { lng: 106.685597400000006, lat: 10.7923913 }, { lng: 106.685771799999998, lat: 10.792426799999999 }, { lng: 106.685864499999994, lat: 10.7924943 }, { lng: 106.685996399999993, lat: 10.792614199999999 }, { lng: 106.688343000000003, lat: 10.7907571 }, { lng: 106.688713899999996, lat: 10.7904614 }, { lng: 106.691981299999995, lat: 10.787890300000001 }, { lng: 106.6980875, lat: 10.7828693 }, { lng: 106.6949544, lat: 10.7795562 }, { lng: 106.693005600000006, lat: 10.777417099999999 }, { lng: 106.691728999999995, lat: 10.775981399999999 }, { lng: 106.691648900000004, lat: 10.775968000000001 }, { lng: 106.689425299999996, lat: 10.773612099999999 }, { lng: 106.687205800000001, lat: 10.771256599999999 }, { lng: 106.685040400000005, lat: 10.7688661 }, { lng: 106.684401500000007, lat: 10.768277100000001 }, { lng: 106.684315299999994, lat: 10.7682012 }, { lng: 106.681814299999999, lat: 10.765800199999999 }, { lng: 106.681546699999998, lat: 10.765666 }, { lng: 106.681483099999994, lat: 10.7656303 }, { lng: 106.681425399999995, lat: 10.765569899999999 }, { lng: 106.681407399999998, lat: 10.7655393 }, { lng: 106.678695700000006, lat: 10.7663607 }, { lng: 106.674396700000003, lat: 10.767674100000001 }, { lng: 106.674522899999999, lat: 10.767883299999999 }, { lng: 106.674945600000001, lat: 10.768496600000001 }, { lng: 106.675262799999999, lat: 10.768892599999999 }, { lng: 106.675823699999995, lat: 10.7696266 }, { lng: 106.676352300000005, lat: 10.7702045 }, { lng: 106.6765264, lat: 10.770396 }, { lng: 106.6767143, lat: 10.770588200000001 }, { lng: 106.677168800000004, lat: 10.771076900000001 }, { lng: 106.677563899999996, lat: 10.771495099999999 }, { lng: 106.677824299999997, lat: 10.771735400000001 }, { lng: 106.677846599999995, lat: 10.771752899999999 }, { lng: 106.678052600000001, lat: 10.7719152 }, { lng: 106.678199500000005, lat: 10.7720351 }, { lng: 106.678376499999999, lat: 10.7721839 }, { lng: 106.679023400000005, lat: 10.7727322 }, { lng: 106.679070199999998, lat: 10.7727731 }, { lng: 106.679513900000003, lat: 10.773161699999999 }, { lng: 106.679593400000002, lat: 10.7732315 }, { lng: 106.679647599999996, lat: 10.7732756 }, { lng: 106.679728900000001, lat: 10.7733419 }, { lng: 106.679797899999997, lat: 10.773398200000001 }, { lng: 106.680050699999995, lat: 10.773604499999999 }, { lng: 106.680208399999998, lat: 10.7737333 }, { lng: 106.680361500000004, lat: 10.773867299999999 }, { lng: 106.680686499999993, lat: 10.774152000000001 }, { lng: 106.680958200000006, lat: 10.77439 }, { lng: 106.681099000000003, lat: 10.774513300000001 }, { lng: 106.681267599999998, lat: 10.774656200000001 }, { lng: 106.681500099999994, lat: 10.7748534 }, { lng: 106.681858099999999, lat: 10.7751641 }, { lng: 106.682313600000001, lat: 10.775556699999999 }, { lng: 106.682383700000003, lat: 10.7756173 }, { lng: 106.682479499999999, lat: 10.7756977 }, { lng: 106.6827459, lat: 10.775910700000001 }, { lng: 106.682743000000002, lat: 10.775915299999999 }, { lng: 106.682474499999998, lat: 10.776374300000001 }, { lng: 106.682400099999995, lat: 10.776501400000001 }, { lng: 106.682174099999997, lat: 10.776853600000001 }, { lng: 106.6820843, lat: 10.776916099999999 }, { lng: 106.681741599999995, lat: 10.777525600000001 }, { lng: 106.681708499999999, lat: 10.7775792 }, { lng: 106.681638599999999, lat: 10.777834 }, { lng: 106.681355499999995, lat: 10.777930100000001 }, { lng: 106.678194199999993, lat: 10.779630300000001 }, { lng: 106.677123499999993, lat: 10.780204299999999 }, { lng: 106.672062299999993, lat: 10.7829169 }, { lng: 106.671472300000005, lat: 10.7832314 }, { lng: 106.669857300000004, lat: 10.784107000000001 }, { lng: 106.6689832, lat: 10.7845697 }, { lng: 106.666314900000003, lat: 10.7859862 }, { lng: 106.665485899999993, lat: 10.7864152 }, { lng: 106.664611500000007, lat: 10.7869019 }, { lng: 106.664229300000002, lat: 10.7871091 }],
    4: [{ lng: 106.686390599999996, lat: 10.7518373 }, { lng: 106.687012899999999, lat: 10.7518373 }, { lng: 106.687427499999998, lat: 10.751863 }, { lng: 106.687890499999995, lat: 10.7518916 }, { lng: 106.690210100000002, lat: 10.752079800000001 }, { lng: 106.690682199999998, lat: 10.7521641 }, { lng: 106.691004000000007, lat: 10.752280000000001 }, { lng: 106.691358100000002, lat: 10.7523433 }, { lng: 106.691561899999996, lat: 10.7523854 }, { lng: 106.695277599999997, lat: 10.752359500000001 }, { lng: 106.696641999999997, lat: 10.752380199999999 }, { lng: 106.697929500000001, lat: 10.7523854 }, { lng: 106.698492799999997, lat: 10.7523854 }, { lng: 106.699157900000003, lat: 10.7523485 }, { lng: 106.699855299999996, lat: 10.752338 }, { lng: 106.700611699999996, lat: 10.7523538 }, { lng: 106.701185699999996, lat: 10.7523327 }, { lng: 106.702175400000002, lat: 10.752360899999999 }, { lng: 106.705003300000001, lat: 10.7525084 }, { lng: 106.705818100000002, lat: 10.7524958 }, { lng: 106.709960800000005, lat: 10.7525105 }, { lng: 106.710098200000004, lat: 10.752511 }, { lng: 106.710212600000006, lat: 10.752511999999999 }, { lng: 106.714109199999996, lat: 10.7525628 }, { lng: 106.714408800000001, lat: 10.7525587 }, { lng: 106.715817900000005, lat: 10.7526501 }, { lng: 106.716918800000002, lat: 10.7527399 }, { lng: 106.717956400000006, lat: 10.753027899999999 }, { lng: 106.718597299999999, lat: 10.753438900000001 }, { lng: 106.719543400000006, lat: 10.7542639 }, { lng: 106.720344400000002, lat: 10.7554436 }, { lng: 106.720588599999999, lat: 10.7559147 }, { lng: 106.720681600000006, lat: 10.7560959 }, { lng: 106.721122600000001, lat: 10.756954199999999 }, { lng: 106.721997599999995, lat: 10.759335800000001 }, { lng: 106.7200658, lat: 10.7599778 }, { lng: 106.717460599999995, lat: 10.7606395 }, { lng: 106.714442300000002, lat: 10.7626454 }, { lng: 106.712665799999996, lat: 10.763598 }, { lng: 106.710987200000005, lat: 10.7647037 }, { lng: 106.709628499999994, lat: 10.7664408 }, { lng: 106.708332600000006, lat: 10.769417300000001 }, { lng: 106.706439500000002, lat: 10.769084599999999 }, { lng: 106.705174, lat: 10.768746399999999 }, { lng: 106.704378399999996, lat: 10.7683295 }, { lng: 106.703917200000006, lat: 10.768133000000001 }, { lng: 106.703540599999997, lat: 10.767942700000001 }, { lng: 106.703240500000007, lat: 10.767757 }, { lng: 106.702854000000002, lat: 10.767480000000001 }, { lng: 106.702473699999999, lat: 10.7670405 }, { lng: 106.702021200000004, lat: 10.766401500000001 }, { lng: 106.701469399999993, lat: 10.765518 }, { lng: 106.701442, lat: 10.7654864 }, { lng: 106.701307799999995, lat: 10.7653316 }, { lng: 106.700930900000003, lat: 10.7650611 }, { lng: 106.700341899999998, lat: 10.7646921 }, { lng: 106.700013200000001, lat: 10.7644863 }, { lng: 106.699832599999993, lat: 10.7643924 }, { lng: 106.699181999999993, lat: 10.7640546 }, { lng: 106.698513599999998, lat: 10.763598699999999 }, { lng: 106.697995899999995, lat: 10.763082799999999 }, { lng: 106.697973099999999, lat: 10.7630508 }, { lng: 106.697224300000002, lat: 10.762003399999999 }, { lng: 106.697070499999995, lat: 10.7617884 }, { lng: 106.696909899999994, lat: 10.7615754 }, { lng: 106.696387700000002, lat: 10.7608836 }, { lng: 106.695946800000002, lat: 10.7603402 }, { lng: 106.695286100000004, lat: 10.759794899999999 }, { lng: 106.694707800000003, lat: 10.759464599999999 }, { lng: 106.694317100000006, lat: 10.759241400000001 }, { lng: 106.692663199999998, lat: 10.7582833 }, { lng: 106.692289799999998, lat: 10.7580156 }, { lng: 106.691854800000002, lat: 10.757728800000001 }, { lng: 106.691313500000007, lat: 10.7573215 }, { lng: 106.690446800000004, lat: 10.7565556 }, { lng: 106.689091300000001, lat: 10.755357500000001 }, { lng: 106.687873999999994, lat: 10.7541309 }, { lng: 106.686996699999995, lat: 10.753246799999999 }, { lng: 106.686734000000001, lat: 10.752891399999999 }, { lng: 106.686497900000006, lat: 10.7524487 }, { lng: 106.686412099999998, lat: 10.7519849 }, { lng: 106.686390599999996, lat: 10.7518373 }]
  }

  /*GRID DATA*/
  columnDefs = [
    { headerName: 'STT', field: 'no', width: 70 },
    { headerName: 'Tên trại', field: 'name', minWidth: 450 },
    { headerName: 'Số người', field: 'people', width: 100 },
    { headerName: 'Địa chỉ', field: 'address', minWidth: 450 }
  ];

  homeListData = [];
  gridApi
  gridColumnApi
  selectedRow


  ngOnInit() {
    // navigator.geolocation.getCurrentPosition(position => {
    //   console.log(2222222,position);
    //   this.center = {
    //     lat: position.coords.latitude,
    //     lng: position.coords.longitude,
    //   }
    // })

  this.center = {
        lat: 10.800811193396541,
        lng: 106.70309379464652,
      }

    this.getAllHome(null);

    this.filterByDistrict();

  }

  // gg map 2
  // google maps zoom level
  zoom: number = 13;
  // homeIcon = "http://maps.google.com/mapfiles/kml/pal2/icon2.png";
  homeIcon = "http://maps.google.com/mapfiles/kml/pal3/icon48.png";


  getHome(el) {
    //get home 
    this.currentHomeId = el._id;

    let _id = el._id;
    this.apiService.getHome(_id).subscribe(
      (res) => {
        this.homeForm.setValue({
          name: res["name"],
          phoneNumber: res["phoneNumber"],
          address: res["address"],
          people: res["people"]
        });

        this.homeInfo = {
          name: res["name"],
          phoneNumber: res["phoneNumber"],
          address: res["address"],
          address_location: res["address_location"],
          people: res["people"],
          modified_date: this.datepipe.transform(res["modified_date"], 'dd-MM-yyyy HH:mm:ss')
        }

      }, (error) => {
        console.log(error);
      });

    // Get history
    this.apiService.getHomeHistory(_id).subscribe(
      (res) => {
        this.homeHistory = res;
        this.barChartData[0]["data"] = [];
        this.barChartLabels = [];
        for (let i in res) {
          this.barChartData[0]["data"].push(res[i]["people"]);
          this.barChartLabels.push(res[i]["modified_date"])
        }
      }, (error) => {
        console.log(error);
      });
  }

  getAllHome(d) {
    let param = null;
    if (d) {
      param = { district: d }
    }
    this.apiService.getAllHome(param).subscribe(
      (res) => {
        if (res.length) {
          //Grid data
          this.homeListData = null;
          this.ggMapMarkers = [];
          this.homeListData = res;
          console.log("home list", res);
          //map markers & center
          this.paths = [];
          for (let i in res) {
            if (res[i].address_location) {
              this.homeListData[i].no = parseInt(i)+1;
              this.ggMapMarkers[i] = res[i].address_location
              this.ggMapMarkers[i]["_id"] = res[i]["_id"]
              // this.paths.push({
              //   lat: res[i].address_location.position.lat,
              //   lng: res[i].address_location.position.lng
              // })

            }
          }


          this.center = {
            lat: this.homeListData[0].address_location.position.lat,
            lng: this.homeListData[0].address_location.position.lng,
          }
          this.paths = d? this.districtPolygon[d]:[];

        }
      }, (error) => {
        console.log(error);
      });
  }


  onUpdate() {
    this.submitted = true;
    if (!this.homeForm.valid) {
      return false;
    } else {
      let is_change_people = this.homeInfo.people == this.homeForm.value.people ? false : true;
      let _data = {
        name: this.homeForm.value.name || "errorName",
        phoneNumber: this.homeForm.value.phoneNumber || "",
        people: this.homeForm.value.people,
        address: this.homeForm.value.address || "errorAddress",
        address_location: this.homeInfo["address_location"],
      }

      this.apiService.updateHome(this.currentHomeId, is_change_people, _data).subscribe(
        (res) => {
          console.log('User successfully updated!', res)
          let _res = res;
          _res["modified_date"] = this.datepipe.transform(res["modified_date"], 'dd-MM-yyyy HH:mm:ss');
          this.homeInfo = _res;
          this.getAllHome(null);
        }, (error) => {
          console.log(error);
        });
    }
  }

  onCreateDistrict() {


    console.log("home form", this.districtForm)
    let _polygon = JSON.parse(this.districtForm.value.polygon.toString().trim());
    console.log(typeof(_polygon))
    let _data = {
      name: this.districtForm.value.name,
      district_id: this.districtForm.value.districtId,
      polygon:_polygon
    }
    console.log(8888, _data); return
    this.apiService.createDistrict(_data).subscribe(
      (res) => {
        console.log('District successfully create!', res)
      }, (error) => {
        console.log(error);
      });
  }

  onSelectionChanged() {
    var selectedRows = this.gridApi.getSelectedRows();
    this.selectedRow = selectedRows[0]
    console.log(78787878, selectedRows)
    this.getHome(this.selectedRow)
    // document.querySelector('#selectedRows').innerHTML =
    //   selectedRows.length === 1 ? selectedRows[0].athlete : '';
  }

  onGridReady(params) {
    console.log(params)
    this.gridApi = params.api;
    this.gridColumnApi = params.columnApi;
  }

  filterByDistrict() {
    console.log("Filter by district");
    //http://polygons.openstreetmap.fr/get_geojson.py?id=2587287&params=0
    // this.apiService.getDistrictPolygon().subscribe(
    //   (res) => {
    //     if (res.length) {
    //       console.log("polygon ne", res)
    //     }
    //   }, (error) => {
    //     console.log(error);
    //   });
  }

  onChangeDistrict(e) {
    if (e && e != "100") {
      this.getAllHome(e || null);
      // this.paths = [
      //   {lat:106.681407399999998,lng: 10.7655393},{lat:106.681612700000002,lng: 10.7654858},{lat:106.6820697,lng: 10.764324},{lat:106.683246499999996,lng: 10.761349600000001},{lat:106.683984699999996,lng: 10.759483100000001},{lat:106.685148799999993,lng: 10.756552599999999},{lat:106.685228800000004,lng: 10.7564432},{lat:106.685496400000005,lng: 10.7558466},{lat:106.685669399999995,lng: 10.7555701},{lat:106.685762199999999,lng: 10.755496600000001},{lat:106.686153700000006,lng: 10.755006099999999},{lat:106.686284599999993,lng: 10.754823},{lat:106.686381600000004,lng: 10.754682600000001},{lat:106.686486400000007,lng: 10.7545082},{lat:106.686553099999998,lng: 10.7543875},{lat:106.686622400000005,lng: 10.754253},{lat:106.686688399999994,lng: 10.7541102},{lat:106.686750200000006,lng: 10.753966399999999},{lat:106.686802,lng: 10.753833699999999},{lat:106.686847499999999,lng: 10.753711900000001},{lat:106.686996699999995,lng: 10.753246799999999},{lat:106.687873999999994,lng: 10.7541309},{lat:106.689091300000001,lng: 10.755357500000001},{lat:106.690446800000004,lng: 10.7565556},{lat:106.691313500000007,lng: 10.7573215},{lat:106.691854800000002,lng: 10.757728800000001},{lat:106.692289799999998,lng: 10.7580156},{lat:106.692663199999998,lng: 10.7582833},{lat:106.694317100000006,lng: 10.759241400000001},{lat:106.694707800000003,lng: 10.759464599999999},{lat:106.695286100000004,lng: 10.759794899999999},{lat:106.695946800000002,lng: 10.7603402},{lat:106.696387700000002,lng: 10.7608836},{lat:106.696909899999994,lng: 10.7615754},{lat:106.697070499999995,lng: 10.7617884},{lat:106.697224300000002,lng: 10.762003399999999},{lat:106.697973099999999,lng: 10.7630508},{lat:106.697995899999995,lng: 10.763082799999999},{lat:106.698513599999998,lng: 10.763598699999999},{lat:106.699181999999993,lng: 10.7640546},{lat:106.699832599999993,lng: 10.7643924},{lat:106.700013200000001,lng: 10.7644863},{lat:106.700341899999998,lng: 10.7646921},{lat:106.700930900000003,lng: 10.7650611},{lat:106.701307799999995,lng: 10.7653316},{lat:106.701442,lng: 10.7654864},{lat:106.701469399999993,lng: 10.765518},{lat:106.702021200000004,lng: 10.766401500000001},{lat:106.702473699999999,lng: 10.7670405},{lat:106.702854000000002,lng: 10.767480000000001},{lat:106.703240500000007,lng: 10.767757},{lat:106.703540599999997,lng: 10.767942700000001},{lat:106.703917200000006,lng: 10.768133000000001},{lat:106.704378399999996,lng: 10.7683295},{lat:106.705174,lng: 10.768746399999999},{lat:106.706439500000002,lng: 10.769084599999999},{lat:106.708332600000006,lng: 10.769417300000001},{lat:106.708026799999999,lng: 10.7701548},{lat:106.707806099999999,lng: 10.7706009},{lat:106.707890599999999,lng: 10.7729406},{lat:106.708168400000005,lng: 10.775467300000001},{lat:106.708756100000002,lng: 10.778187300000001},{lat:106.710124899999997,lng: 10.781049400000001},{lat:106.710990699999996,lng: 10.7824209},{lat:106.712958099999994,lng: 10.7842144},{lat:106.714963600000004,lng: 10.785626199999999},{lat:106.713514599999996,lng: 10.7871179},{lat:106.712946700000003,lng: 10.787497800000001},{lat:106.712376199999994,lng: 10.787622499999999},{lat:106.7116039,lng: 10.787785899999999},{lat:106.711164100000005,lng: 10.7876768},{lat:106.710452399999994,lng: 10.7876207},{lat:106.709927800000003,lng: 10.7875026},{lat:106.709387300000003,lng: 10.787500700000001},{lat:106.708633599999999,lng: 10.7879039},{lat:106.708192800000006,lng: 10.788326400000001},{lat:106.707867399999998,lng: 10.788728799999999},{lat:106.707524699999993,lng: 10.7892194},{lat:106.707286999999994,lng: 10.7900121},{lat:106.706883399999995,lng: 10.791169099999999},{lat:106.706748599999997,lng: 10.7916825},{lat:106.706540000000004,lng: 10.791909199999999},{lat:106.706061500000004,lng: 10.792275500000001},{lat:106.704915799999995,lng: 10.792593999999999},{lat:106.703269399999996,lng: 10.793017600000001},{lat:106.7015636,lng: 10.793419200000001},{lat:106.700883500000003,lng: 10.7936318},{lat:106.700572800000003,lng: 10.793590399999999},{lat:106.699579299999996,lng: 10.7937893},{lat:106.697676799999996,lng: 10.7939401},{lat:106.697565499999996,lng: 10.793888600000001},{lat:106.697039099999998,lng: 10.7938796},{lat:106.696891899999997,lng: 10.7938771},{lat:106.696340899999996,lng: 10.793811399999999},{lat:106.695961600000004,lng: 10.7937786},{lat:106.695531399999993,lng: 10.793677199999999},{lat:106.695210200000005,lng: 10.793647099999999},{lat:106.694939599999998,lng: 10.793760600000001},{lat:106.694637900000004,lng: 10.7941293},{lat:106.694794700000003,lng: 10.794849299999999},{lat:106.694659200000004,lng: 10.7951117},{lat:106.694465500000007,lng: 10.7952034},{lat:106.694094800000002,lng: 10.7952187},{lat:106.693654199999997,lng: 10.795154399999999},{lat:106.693105000000003,lng: 10.795070300000001},{lat:106.692542200000005,lng: 10.7951338},{lat:106.691951500000002,lng: 10.7956383},{lat:106.691633199999998,lng: 10.7957277},{lat:106.691045900000006,lng: 10.795962599999999},{lat:106.690722300000004,lng: 10.7960031},{lat:106.690521399999994,lng: 10.795973999999999},{lat:106.690139099999996,lng: 10.795926400000001},{lat:106.689276199999995,lng: 10.795798},{lat:106.689028500000006,lng: 10.7957611},{lat:106.688774100000003,lng: 10.7956632},{lat:106.687856400000001,lng: 10.795170499999999},{lat:106.687478299999995,lng: 10.795017100000001},{lat:106.687248199999999,lng: 10.795083099999999},{lat:106.687088500000002,lng: 10.795237699999999},{lat:106.686977499999998,lng: 10.7954186},{lat:106.686425400000005,lng: 10.7965863},{lat:106.686170599999997,lng: 10.796962199999999},{lat:106.685936499999997,lng: 10.7970702},{lat:106.685709900000006,lng: 10.797128000000001},{lat:106.685290199999997,lng: 10.7970969},{lat:106.684959399999997,lng: 10.796890100000001},{lat:106.684670600000004,lng: 10.7964751},{lat:106.684634200000005,lng: 10.796170399999999},{lat:106.684871799999996,lng: 10.7944885},{lat:106.685013900000001,lng: 10.794185499999999},{lat:106.685834099999994,lng: 10.7934395},{lat:106.686115099999995,lng: 10.7931423},{lat:106.6861131,lng: 10.7928028},{lat:106.685996399999993,lng: 10.792614199999999},{lat:106.688343000000003,lng: 10.7907571},{lat:106.688713899999996,lng: 10.7904614},{lat:106.691981299999995,lng: 10.787890300000001},{lat:106.698068899999996,lng: 10.7828692},{lat:106.6949544,lng: 10.7795562},{lat:106.693005600000006,lng: 10.777417099999999},{lat:106.691715599999995,lng: 10.7760091},{lat:106.691648900000004,lng: 10.775968000000001},{lat:106.689425299999996,lng: 10.773612099999999},{lat:106.6872118,lng: 10.771251299999999},{lat:106.685095399999994,lng: 10.768834500000001},{lat:106.684401500000007,lng: 10.768277100000001},{lat:106.684315299999994,lng: 10.7682012},{lat:106.681814299999999,lng: 10.765800199999999},{lat:106.681546699999998,lng: 10.765666},{lat:106.681483099999994,lng: 10.7656303},{lat:106.681407399999998,lng: 10.7655393}
      // ]
      // console.log(this.paths)
    }
    else {
      this.getAllHome(null);

    }
  }

}

// just an interface for type safety.
interface marker {
  lat: number;
  lng: number;
  label?: string;
  draggable: boolean;
}
